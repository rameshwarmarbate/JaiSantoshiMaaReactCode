import{r as p,a as e}from"./react-ef3a9354.js";import"./Card.module-3bdbfb7f.js";import{J as V,L as Q,O as A,P as G,Q as J,R as j}from"./index-38e56929.js";import{C as K,a as M}from"./ContactPersonForm-b4f5661a.js";import{u as U,a as X}from"./react-redux-60e7b2bb.js";import{m as Y}from"./@material-ui-8342bca0.js";import{a as Z}from"./react-router-c905df87.js";import{O as F,Q as k,a as $,i as s,h as o,V as g,A as D,l as N}from"./material-a209ad60.js";import"./@babel-5e587562.js";import"./react-dom-7dcc36ef.js";import"./scheduler-765c72db.js";import"./redux-persist-cccb0614.js";import"./redux-fa075741.js";import"./@reduxjs-2459f64e.js";import"./immer-41fd5235.js";import"./redux-thunk-ef899f4c.js";import"./axios-21b846bc.js";import"./hoist-non-react-statics-1d21e5a8.js";import"./react-router-dom-584a1cea.js";import"./@remix-run-8989dd9f.js";import"./icons-material-e9adcbb1.js";import"./react-icons-5ea1dfbe.js";import"./use-sync-external-store-54e50305.js";import"./system-5cdc79da.js";import"./styled-engine-b70b2ed8.js";import"./@emotion-afe87aa6.js";import"./stylis-79144faa.js";import"./utils-7edb168f.js";import"./private-theming-1cbad2aa.js";import"./react-transition-group-6e6f7170.js";import"./dom-helpers-9a525042.js";import"./base-7d25deaf.js";import"./@popperjs-f3391c26.js";import"./clsx-1229b3e0.js";import"./jss-299ee23a.js";import"./is-in-browser-9e40da8a.js";import"./jss-plugin-rule-value-function-60587a41.js";import"./jss-plugin-global-c6030a8c.js";import"./jss-plugin-nested-fb36a984.js";import"./jss-plugin-camel-case-92f9f32c.js";import"./hyphenate-style-name-80972348.js";import"./jss-plugin-default-unit-2cb1c9e9.js";import"./jss-plugin-vendor-prefixer-24b01907.js";import"./css-vendor-1e7d08f8.js";import"./jss-plugin-props-sort-0c9fca2f.js";const ee=Y(()=>({menuPaper:{maxHeight:300,maxWidth:100}})),f={name:{invalid:!1,message:""},address:{invalid:!1,message:""},telephone:{invalid:!1,message:""},email:{invalid:!1,message:""},contactPerson:{invalid:!1,message:""}},Ke=()=>{const h={name:"",address:"",telephone:"",alternateTelephone:"",fax:"",cstNo:"",gstNo:"",state:"",city:"",email:"",vendorCode:"",vatNo:"",eccNo:"",contactPerson:[]},[i,u]=p.useState(h),[l,b]=p.useState(f),[x,v]=p.useState(""),[C,P]=p.useState(null),z=U(V);ee();const y=X(),S=Z(),W=p.useCallback(()=>{S("/master/customers")},[S]),H=()=>{u({...h}),v(""),b(f)},m=t=>{const a=t.target.name,r=t.target.value;u(n=>({...n,[a]:r}))},L=(t,a)=>{u(r=>({...r,state:a}))},R=t=>{t.preventDefault(),O(i)||y(J(i)).then(({payload:a={}})=>{const{message:r}=(a==null?void 0:a.data)||{};r?v(r):(v(""),u(h),W())}).catch(a=>{v(a.message)})},B=()=>{W()},O=t=>{var n,c,d,E,T;const a={...f};(c=(n=t.name)==null?void 0:n.trim)!=null&&c.call(n)||(a.name={invalid:!0,message:"Customer name is required"}),(E=(d=t.address)==null?void 0:d.trim)!=null&&E.call(d)||(a.address={invalid:!0,message:"Address is required"}),t.email!==""&&!j.test(t.email)&&(a.email={invalid:!0,message:"Email is invalid"}),(T=t.contactPerson)!=null&&T.length||(a.contactPerson={invalid:!0,message:"At least one contact person is required"});let r=!1;for(const w in a)a[w].invalid===!0&&(r=!0);return r&&b(a),r},I=t=>{if(!C)u(a=>{var n,c;const r={...a};return(c=(n=r.contactPerson)==null?void 0:n.push)==null||c.call(n,t),r});else{const a={...C},r={...t};delete r.index,u(n=>{const c={...n},d=[...n.contactPerson];return d[a.index]={...r},c.contactPerson=[...d],c}),P(null)}},_=t=>{P({...i.contactPerson[t],index:t})},q=t=>{u(a=>{var n,c;const r={...a};return r.contactPerson=(c=(n=r.contactPerson)==null?void 0:n.filter)==null?void 0:c.call(n,(d,E)=>E!==t),r})};return e.createElement(e.Fragment,null,z&&e.createElement(Q,null),e.createElement("h1",{className:"pageHead"},"Add a customer"),x!==""&&e.createElement(F,{sx:{width:"100%",margin:"0 0 30px 0",border:"1px solid red",borderRadius:"4px"},spacing:2},e.createElement(k,{severity:"error"},x)),!z&&e.createElement("div",null,e.createElement("form",{action:"",id:"customerForm",onSubmit:R},e.createElement("div",{className:"inner-wrap"},e.createElement($,{sx:{padding:"20px",marginBottom:"20px"}},e.createElement("div",{className:"grid grid-6-col"},e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,error:l.name.invalid},e.createElement(o,{size:"small",variant:"outlined",label:"Name",value:i.name,error:l.name.invalid,onChange:m,name:"name",id:"name"}),l.name.invalid&&e.createElement(g,null,l.name.message))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,error:l.address.invalid},e.createElement(o,{size:"small",variant:"outlined",label:"Correspondence address",value:i.address,onChange:m,error:l.address.invalid,name:"address",id:"address"}),l.address.invalid&&e.createElement(g,null,l.address.message))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,error:l.telephone.invalid},e.createElement(o,{size:"small",variant:"outlined",label:"Telephone",value:i.telephone,error:l.telephone.invalid,onChange:m,onInput:A,name:"telephone",id:"telephone"}),l.telephone.invalid&&e.createElement(g,null,l.telephone.message))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0},e.createElement(o,{size:"small",variant:"outlined",label:"Alternate Telephone",value:i.alternateTelephone,onChange:m,onInput:A,name:"alternateTelephone",id:"alternateTelephone"}))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0},e.createElement(o,{size:"small",variant:"outlined",label:"Fax No",value:i.fax,onChange:m,name:"fax",id:"fax"}))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0},e.createElement(o,{size:"small",variant:"outlined",label:"CST No.",value:i.cstNo,onChange:m,name:"cstNo",id:"cstNo"}))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0},e.createElement(o,{size:"small",variant:"outlined",label:"GST No.",value:i.gstNo,onChange:m,name:"gstNo",id:"gstNo"}))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,size:"small"},e.createElement(D,{disablePortal:!0,size:"small",name:"state",options:G,value:i.state||null,onChange:(t,a)=>L(t,a),getOptionLabel:t=>t,openOnFocus:!0,renderInput:t=>e.createElement(o,{...t,label:"State",fullWidth:!0})}))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0},e.createElement(o,{size:"small",variant:"outlined",label:"City",value:i.city,onChange:m,name:"city",id:"city"}))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0,error:l.email.invalid},e.createElement(o,{size:"small",variant:"outlined",label:"Email",value:i.email,error:l.email.invalid,onChange:m,name:"email",id:"email"}),l.email.invalid&&e.createElement(g,null,l.email.message))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0},e.createElement(o,{size:"small",variant:"outlined",label:"Vendor Code",value:i.vendorCode,onChange:m,name:"vendorCode",id:"vendorCode"}))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0},e.createElement(o,{size:"small",variant:"outlined",label:"VAT No",value:i.vatNo,onChange:m,name:"vatNo",id:"vatNo"}))),e.createElement("div",{className:"grid-item"},e.createElement(s,{fullWidth:!0},e.createElement(o,{size:"small",variant:"outlined",label:"ECC No",value:i.eccNo,onChange:m,name:"eccNo",id:"eccNo"}))))))),e.createElement("div",{className:"bl_contact_person"},e.createElement("div",{className:"bl_form"},e.createElement(K,{onContactPersonAdd:I,editContact:C})),e.createElement("div",{className:"bl_content"},l.contactPerson.invalid&&e.createElement(F,{sx:{width:"100%",margin:"0 0 30px 0",border:"1px solid red",borderRadius:"4px"},spacing:2},e.createElement(k,{severity:"error"},l.contactPerson.message)),e.createElement(M,{contactPersons:i.contactPerson,handleTriggerEdit:_,handleTriggerDelete:q}))),e.createElement("div",{className:"right"},e.createElement(N,{variant:"outlined",size:"medium",onClick:B},"Back"),e.createElement(N,{variant:"outlined",size:"medium",onClick:H,className:"ml6"},"Reset"),e.createElement(N,{variant:"contained",size:"medium",type:"submit",color:"primary",form:"customerForm",className:"ml6"},"Save"))))};export{Ke as default};
